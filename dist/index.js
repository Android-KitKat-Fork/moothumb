!function(n){var i={};function e(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=n,e.c=i,e.d=function(n,i,t){e.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:t})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,i){if(1&i&&(n=e(n)),8&i)return n;if(4&i&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(var r in n)e.d(t,r,function(i){return n[i]}.bind(null,r));return t},e.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(i,"a",i),i},e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},e.p="",e(e.s=0)}([function(n,i,e){"use strict";e.r(i);const t=0,r=1,a=2,o=3,s=4,l=5,m=6,u=7,c=8,T=9,g=10,f=11,w=12,h=13,d="R",p="2",y="3";class P{constructor(n,i,e){this.method=n,this.min=i,this.max=e}}const F=0,x=1,M=2,b=3,v=4;class k{constructor(n,i){this.min=n-this.tolerance,this.max=i+this.tolerance}}function D(n,i){const e=new Map;for(let o of n.twoTimesFallingStartDays)for(let s of n.threeTimesFallingStartDays){const l=1;if(o<=s&&o+2+l>s)continue;if(s<o&&s+3+l>o)continue;function t(i){switch(i){case o+0:return n.twoTimesFalling1Transition;case o+1:return n.twoTimesFalling2Transition;case s+0:return n.threeTimesFalling1Transition;case s+1:return n.threeTimesFalling2Transition;case s+2:return n.threeTimesFalling3Transition;default:return n.risingTransition}}function a(n){switch(n){case o+0:case o+1:return p;case s+0:case s+1:case s+2:return y;default:return d}}const m=new Array(h);let u="";for(let n=r;n<h;n++)m[n]=t(n),u+=a(n);e.set(u,A(i,m))}return e}function S(n,i){const e=new Array(h);return e[r]=n.mon1Transition,e.fill(n.otherDaysTransition,a),A(i,e)}function I(n,i){const e=new Array(h);for(let t of n.risingStartDays){const o=new Array(h);o[r]=n.mon1Transition,o.fill(n.beforeRisingTransition,a,t);const s=[n.rising1Transition,n.rising2Transition,n.rising3Transition,n.rising4Transition,n.rising5Transition,n.rising6Transition];for(let i=t;i<h;i++){let e=i-t;e<s.length?o[i]=s[e]:o[i]=n.afterRisingTransition}e[t]=A(i,o)}return e}function R(n,i){const e=I(n,i);if(!n.hasFourthPeriodPeak)return e;for(let t of n.risingStartDays){const n=e[t];n&&(i[t+3]?(i[t+2]||(n[t+2].max=Math.min(n[t+2].max,i[t+3])),i[t+4]&&(n[t+4].max=Math.min(n[t+4].max,i[t+3]))):(i[t+2]&&(n[t+3].min=Math.max(n[t+3].min,i[t+2])),i[t+4]&&(n[t+3].min=Math.max(n[t+3].min,i[t+4]))))}return e}function A(n,i){const e=function(n){if(n&&90<=n&&n<=110)return[n,n];return[90,110]}(n[t]),a=new Array(h);a[t]=new k(e[0],e[1]);const o=[...n];for(let n of e){o[t]=n;const e=C(o,i);if(e)for(let n=r;n<h;n++)a[n]?(a[n].min=Math.min(a[n].min,e[n].min),a[n].max=Math.max(a[n].max,e[n].max)):a[n]=e[n]}for(let i=r;i<h;i++)if(n[i])a[i]=new k(n[i],n[i]);else if(!a[i])return null;return a}function C(n,i){let e=new Array(h);for(let a=r;a<h;a++)switch(i[a].method){case F:e[a]=new k(i[a].min,i[a].max);break;case v:e[a]=new k(n[t]*i[a].min/100,n[t]*i[a].max/100);break;case x:n[a-1]?e[a]=new k(n[a-1]+i[a].min,n[a-1]+i[a].max):e[a]=new k(e[a-1].min+i[a].min,e[a-1].max+i[a].max);break;case b:e[a]=new k(0,0);for(let r=a;r>=t;r--){if(n[r]&&r!=a){e[a].min+=n[r],e[a].max+=n[r];break}if(i[r].method==F||i[r].method==x||i[r].method==M){e[a].min+=e[r].min,e[a].max+=e[r].max;break}if(i[r].method==v){e[a].min+=n[t]*(i[r].min/100),e[a].max+=n[t]*(i[r].max/100);break}i[r].method!=b||(e[a].min+=n[t]*(i[r].min/100),e[a].max+=n[t]*(i[r].max/100))}break;case M:n[a-1]?e[a]=new k(n[a-1]*i[a].min/100,n[a-1]*i[a].max/100):e[a]=new k(e[a-1].min*i[a].min/100,e[a-1].max*i[a].max/100)}for(let r=h-1;r>=a;r--){let a;switch(i[r].method){case x:a=n[r]?new k(n[r]-i[r].max,n[r]-i[r].min):new k(e[r].min-i[r].max,e[r].max-i[r].min);break;case b:let o=0,s=0;for(let l=r;l<=w&&(i[l].method!=F&&i[l].method!=v);l++){if(i[l].method==x||i[l].method==M){if(n[l-1]){a=new k(n[l-1]-n[t]*s/100,n[l-1]-n[t]*o/100);break}a=new k(e[l-1].min-n[t]*s/100,e[l-1].max-n[t]*o/100);break}if(i[l].method!=b)break;if(o+=i[l].min,s+=i[l].max,n[l]){a=new k(n[l]-n[t]*s/100,n[l]-n[t]*o/100);break}}break;case M:a=n[r]?new k(100*n[r]/i[r].max,100*n[r]/i[r].min):new k(100*e[r].min/i[r].max,100*e[r].max/i[r].min)}a&&(e[r-1]?(e[r-1].min=Math.min(e[r-1].min,a.min),e[r-1].max=Math.max(e[r-1].max,a.max)):e[r-1]=new k(a.min,a.max))}for(let i=r;i<h;i++)if(n[i]&&e[i]&&!E(e[i],n[i]))return null;return e}function E(n,i){return n.min<=i&&i<=n.max}const B={key:"acww",wave:{risingTransition:new P(v,80,140),twoTimesFalling1Transition:new P(v,40,80),twoTimesFalling2Transition:new P(v,40,80),threeTimesFalling1Transition:new P(v,40,80),threeTimesFalling2Transition:new P(v,40,80),threeTimesFalling3Transition:new P(v,40,80),twoTimesFallingStartDays:[c],threeTimesFallingStartDays:[a]},falling:{mon1Transition:new P(v,78,80),otherDaysTransition:new P(b,-4,-1)},thirdPeriod:{mon1Transition:new P(v,78,80),beforeRisingTransition:new P(b,-4,-1),rising1Transition:new P(v,80,140),rising2Transition:new P(v,140,200),rising3Transition:new P(v,200,600),rising4Transition:new P(v,140,200),rising5Transition:new P(v,80,140),rising6Transition:new P(v,78,80),afterRisingTransition:new P(b,-4,-1),risingStartDays:[l,m,u,c]},fourthPeriod:{mon1Transition:new P(v,78,80),beforeRisingTransition:new P(b,-4,-1),rising1Transition:new P(v,80,140),rising2Transition:new P(v,80,140),rising3Transition:new P(v,140,170),rising4Transition:new P(v,170,200),rising5Transition:new P(v,140,170),rising6Transition:new P(v,78,80),afterRisingTransition:new P(b,-4,-1),risingStartDays:[o,s,l,m,u,c],hasFourthPeriodPeak:!0}},N={key:"accf",wave:{risingTransition:new P(v,80,140),twoTimesFalling1Transition:new P(v,60,80),twoTimesFalling2Transition:new P(b,-10,-4),threeTimesFalling1Transition:new P(v,60,80),threeTimesFalling2Transition:new P(b,-10,-4),threeTimesFalling3Transition:new P(b,-10,-4),twoTimesFallingStartDays:[r,a,o,T,g,f],threeTimesFallingStartDays:[r,a,o,s,T,g]},falling:{mon1Transition:new P(v,75,80),otherDaysTransition:new P(b,-6,-2)},thirdPeriod:{mon1Transition:new P(v,75,80),beforeRisingTransition:new P(b,-6,-2),rising1Transition:new P(v,80,140),rising2Transition:new P(v,140,200),rising3Transition:new P(v,200,600),rising4Transition:new P(v,140,200),rising5Transition:new P(v,80,140),rising6Transition:new P(v,75,80),afterRisingTransition:new P(b,-6,-2),risingStartDays:[l,m,u,c]},fourthPeriod:{mon1Transition:new P(v,75,80),beforeRisingTransition:new P(b,-6,-2),rising1Transition:new P(v,80,140),rising2Transition:new P(v,80,140),rising3Transition:new P(v,140,200),rising4Transition:new P(v,140,200),rising5Transition:new P(v,140,200),rising6Transition:new P(v,75,80),afterRisingTransition:new P(b,-6,-2),risingStartDays:[s,l,m,u,c],hasFourthPeriodPeak:!0}},j={key:"acnl",wave:{risingTransition:new P(v,90,140),twoTimesFalling1Transition:new P(v,60,80),twoTimesFalling2Transition:new P(b,-10,-4),threeTimesFalling1Transition:new P(v,60,80),threeTimesFalling2Transition:new P(b,-10,-4),threeTimesFalling3Transition:new P(b,-10,-4),twoTimesFallingStartDays:[r,a,o,s,l,m,u,c,T,g,f],threeTimesFallingStartDays:[r,a,o,s,l,m,u,c,T,g]},falling:{mon1Transition:new P(v,85,90),otherDaysTransition:new P(b,-6,-2)},thirdPeriod:{mon1Transition:new P(v,85,90),beforeRisingTransition:new P(b,-6,-2),rising1Transition:new P(v,90,140),rising2Transition:new P(v,140,200),rising3Transition:new P(v,200,600),rising4Transition:new P(v,140,200),rising5Transition:new P(v,90,140),rising6Transition:new P(v,40,90),afterRisingTransition:new P(v,40,90),risingStartDays:[a,o,s,l,m,u,c]},fourthPeriod:{mon1Transition:new P(v,40,90),beforeRisingTransition:new P(b,-6,-2),rising1Transition:new P(v,90,140),rising2Transition:new P(v,90,140),rising3Transition:new P(v,140,190),rising4Transition:new P(v,140,200),rising5Transition:new P(v,140,190),rising6Transition:new P(v,40,90),afterRisingTransition:new P(b,-6,-2),risingStartDays:[r,a,o,s,l,m,u,c],hasFourthPeriodPeak:!0}};class O{static getPreset(n){switch(n){case B.key:return B;case N.key:return N;case j.key:return j}return null}}const _=[r,a,o,s,l,m,u,c,T,g,f,w];function L(){const n=Array.from(document.getElementsByName("price")).map(n=>{let i=parseInt(n.value);return J(i,0,2e3)?i:null});!function(n){localStorage.prices=n}(n),function(n){if(!n)return;let i=(n[0]?n[0]:"0")+" ";for(let e=1;e<n.length;e++)e%2==0&&(i+="/"),n[e]&&(i+=n[e]),e%2==0&&(i+=" ");i=i.replace(/[^0-9]+$/g,""),priceInputForm.inlineInput.value=i}(n),function(n,i){if(function(n){const i=document.getElementsByClassName("realPrice");for(let e=0;e<n.length&&e<i.length;e++)i[e].innerText=n[e]?n[e]:"-"}(n),!i)return;const e=document.getElementById("predictionTableBody");e.innerHTML="",function(n,i,e){function t(n){switch(n){case d:return"↑";case p:case y:return"↓";default:return"["+n+"]"}}for(let r of i){const i=r[0],a=r[1];if(!a)continue;const o=[...i].reduce((n,i,e)=>n+t(i),"");z(n,o,a,e)}}("파도형",i.wave,e),function(n,i,e){if(!i)return;z(n,null,i,e)}("하락형",i.falling,e),q("3기형",i.thirdPeriod,e),q("4기형",i.fourthPeriod,e),document.getElementById("predictionResult").style.display="block"}(n,function(n,i){return k.prototype.tolerance=n.tolerance,{wave:D(n.wave,i),falling:S(n.falling,i),thirdPeriod:I(n.thirdPeriod,i),fourthPeriod:R(n.fourthPeriod,i)}}(function(){function n(n){return new P(G(parameterInputForm.transitionMethod[n].value,-1),G(parameterInputForm.transitionMin[n].value,0),G(parameterInputForm.transitionMax[n].value,0))}function i(n){const i=n*_.length,e=new Array;for(let n=0;n<_.length;n++)parameterInputForm.transitionDay[i+n].checked&&e.push(_[n]);return e}return{tolerance:G(parameterInputForm.tolerance.value,0),wave:{risingTransition:n(0),twoTimesFalling1Transition:n(1),twoTimesFalling2Transition:n(2),threeTimesFalling1Transition:n(3),threeTimesFalling2Transition:n(4),threeTimesFalling3Transition:n(5),twoTimesFallingStartDays:i(0),threeTimesFallingStartDays:i(1)},falling:{mon1Transition:n(6),otherDaysTransition:n(7)},thirdPeriod:{mon1Transition:n(8),beforeRisingTransition:n(9),rising1Transition:n(10),rising2Transition:n(11),rising3Transition:n(12),rising4Transition:n(13),rising5Transition:n(14),rising6Transition:n(15),afterRisingTransition:n(16),risingStartDays:i(2)},fourthPeriod:{mon1Transition:n(17),beforeRisingTransition:n(18),rising1Transition:n(19),rising2Transition:n(20),rising3Transition:n(21),rising4Transition:n(22),rising5Transition:n(23),rising6Transition:n(24),afterRisingTransition:n(25),risingStartDays:i(3),hasFourthPeriodPeak:parameterInputForm.fourthPeriodPeak.checked}}}(),n))}function H(n){if(!n)return;document.getElementsByName("price").forEach(n=>n.value="");const i=document.getElementsByName("price");for(let e=0;e<i.length&&e<n.length;e++)J(n[e],0,2e3)&&(i[e].value=n[e])}function $(n){function i(n,i){function e(n){return n-_[0]}const t=n*_.length;for(let n=0;n<_.length;n++)parameterInputForm.transitionDay[t+n].checked=!1;for(let n of i)parameterInputForm.transitionDay[t+e(n)].checked=!0}parameterInputForm.parameterPreset.value=n.key;const e=[n.wave.risingTransition,n.wave.twoTimesFalling1Transition,n.wave.twoTimesFalling2Transition,n.wave.threeTimesFalling1Transition,n.wave.threeTimesFalling2Transition,n.wave.threeTimesFalling3Transition,n.falling.mon1Transition,n.falling.otherDaysTransition,n.thirdPeriod.mon1Transition,n.thirdPeriod.beforeRisingTransition,n.thirdPeriod.rising1Transition,n.thirdPeriod.rising2Transition,n.thirdPeriod.rising3Transition,n.thirdPeriod.rising4Transition,n.thirdPeriod.rising5Transition,n.thirdPeriod.rising6Transition,n.thirdPeriod.afterRisingTransition,n.fourthPeriod.mon1Transition,n.fourthPeriod.beforeRisingTransition,n.fourthPeriod.rising1Transition,n.fourthPeriod.rising2Transition,n.fourthPeriod.rising3Transition,n.fourthPeriod.rising4Transition,n.fourthPeriod.rising5Transition,n.fourthPeriod.rising6Transition,n.fourthPeriod.afterRisingTransition];for(let n=0;n<e.length;n++)t=n,r=e[n],parameterInputForm.transitionMethod[t].value=r.method,parameterInputForm.transitionMin[t].value=r.min,parameterInputForm.transitionMax[t].value=r.max;var t,r;const a=[n.wave.twoTimesFallingStartDays,n.wave.threeTimesFallingStartDays,n.thirdPeriod.risingStartDays,n.fourthPeriod.risingStartDays];for(let n=0;n<a.length;n++)i(n,a[n]);parameterInputForm.fourthPeriodPeak.checked=n.fourthPeriod.hasFourthPeriodPeak}function q(n,i,e){const t=["월AM변조","월PM변조","화AM변조","화PM변조","수AM변조","수PM변조","목AM변조","목PM변조","금AM변조","금PM변조","토AM변조","토PM변조"];for(let r=0;r<i.length;r++){const a=i[r];a&&z(n,t[r],a,e)}}function z(n,i,e,t){let r=t.insertRow(-1),a=document.createElement("th");if(a.innerText=n,r.appendChild(a),i&&""!=i){let n=document.createElement("th");n.innerText=i,r.appendChild(n)}else a.colSpan=2;let o,s=0;for(let n=0;n<e.length;n++){const i=r.insertCell(-1),t=Math.floor(e[n].min),a=Math.ceil(e[n].max);i.innerText=t==a?t:t+"~"+a,s<a&&(s=a,o=new Array),s==a&&o.push(i)}o.forEach(n=>{n.className="maxPrice"})}function G(n,i){let e=parseInt(n);return e||i}function J(n,i,e){return n&&i<=n&&n<=e}window.onBodyLoad=function(){!function(){const n=document.getElementById("priceInputTableBody"),i='<input type="number" name="price" class="price" min="0" max="2000">';for(let e of["월","화","수","목","금","토"]){let t=n.insertRow(-1),r=document.createElement("th");r.innerText=e,t.appendChild(r),t.insertCell(-1).innerHTML=i+"/"+i}}(),function(){const n=[{name:"가격 (벨)",value:F},{name:"이번 가격 - 이전 가격 (벨)",value:x},{name:"이번 가격 / 이전 가격 (%)",value:M},{name:"이번 가격 대비 - 이전 가격 대비 (%)",value:b},{name:"이번 가격 / 산 가격 (%)",value:v}];for(let i of document.getElementsByClassName("transitionMethodCell")){const e=document.createElement("select");e.name="transitionMethod",i.appendChild(e);for(let i=0;i<n.length;i++){const t=document.createElement("option");t.innerText=n[i].name,t.value=n[i].value,e.appendChild(t)}}}(),function(){for(let n of document.getElementsByClassName("transitionAmountCell"))n.innerHTML='<input type="number" name="transitionMin" class="transitionAmount">~<input type="number" name="transitionMax" class="transitionAmount">'}(),function(){const n=["월AM","월PM","화AM","화PM","수AM","수PM","목AM","목PM","금AM","금PM","토AM","토PM"];for(let i of document.getElementsByClassName("transitionDaysCell"))for(let e of n){const n=document.createElement("label");n.innerHTML='<input type="checkbox" name="transitionDay">'+e,i.appendChild(n)}}(),H(function(){if(!localStorage.prices)return null;return localStorage.prices.split(",").map(n=>parseInt(n))}()),$(O.getPreset("acnl"))},window.onInlinePredictionButtonClick=function(){const n=function(){let n=priceInputForm.inlineInput.value;if(n=n.replace(/^[^0-9]+|[^0-9]+$/g,""),n=n.replace(/[^0-9/]+|[\/]/g," "),""==n)return null;return n.split(" ")}();n&&(H(n),L())},window.onPredictionButtonClick=L,window.onParameterInputToggleButtonClick=function(){const n=document.getElementById("parameterInput");"block"==n.style.display?n.style.display="none":n.style.display="block"},window.onParameterPresetChange=function(){$(O.getPreset(parameterPreset.value))}}]);